<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Minecraft Mobile - Menu & Skins</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <style>
        /* TELA INICIAL (MENU) */
        #menu-inicial {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://mks-minecraft.vercel.app/img/bg.jpg');
            background-size: cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            gap: 20px;
        }
        .menu-title {
            color: white;
            font-family: 'Arial Black', sans-serif;
            font-size: 40px;
            text-shadow: 4px 4px #373737;
            margin-bottom: 20px;
        }
        .menu-btn {
            width: 250px;
            padding: 15px;
            background: #4a4a4a;
            border: 3px solid #000;
            color: #e0e0e0;
            font-family: sans-serif;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
        }
        .menu-btn:active { background: #5a8a3a; color: white; }

        /* INTERFACE DO JOGO (Escondida inicialmente) */
        #game-ui { display: none; }

        /* Estilos Joysticks, Hotbar e Top Bar (Mantidos) */
        .top-bar { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 2000; }
        .top-btn { background: rgba(0, 0, 0, 0.6); border: 2px solid white; color: white; padding: 8px 12px; border-radius: 5px; font-size: 12px; font-weight: bold; }
        .joystick-container { position: fixed; bottom: 30px; left: 20px; z-index: 999; display: grid; grid-template-columns: repeat(3, 60px); gap: 8px; }
        button.move-btn { width: 60px; height: 60px; background: rgba(45, 65, 85, 0.8); border: 2px solid #ccc; color: white; border-radius: 12px; font-weight: bold; }
        .hotbar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); display: flex; gap: 4px; background: rgba(0, 0, 0, 0.5); padding: 6px; z-index: 1000; }
        .slot { width: 50px; height: 50px; background: rgba(255, 255, 255, 0.2); border: 3px solid #555; display: flex; justify-content: center; align-items: center; color: white; font-family: sans-serif; }
        .slot.active { border-color: #ffff00; }
    </style>
</head>
<body>

    <div id="menu-inicial">
        <div class="menu-title">MINECRAFT WEB</div>
        <div class="menu-btn" onclick="startGame()">JOGAR</div>
        <div class="menu-btn" onclick="toggleSkin()">MUDAR SKIN</div>
        <div style="color: white; font-family: sans-serif; font-size: 12px;">Skin Atual: <span id="skin-name">Padrão</span></div>
    </div>

    <div id="game-ui">
        <div class="top-bar">
            <button class="top-btn" onclick="cyclePerspective()">CÂMERA</button>
            <button class="top-btn" onclick="exitGame()">SAIR</button>
        </div>

        <div class="hotbar"><div class="slot active">1</div><div class="slot">2</div><div class="slot">3</div></div>

        <div class="joystick-container">
            <div style="grid-column: 2"><button class="move-btn" id="btnUp">W</button></div>
            <button class="move-btn" id="btnLeft" style="grid-row: 2; grid-column: 1">A</button>
            <button class="move-btn" id="btnDown" style="grid-row: 2; grid-column: 2">S</button>
            <button class="move-btn" id="btnRight" style="grid-row: 2; grid-column: 3">D</button>
        </div>
    </div>

    <a-scene raycaster="objects: .interactable">
        <a-assets>
            <img id="skin-rosa" src="https://i.imgur.com/k98mF9u.png"> </a-assets>

        <a-sky color="#73C2FB"></a-sky>
        <a-plane class="interactable" position="0 0 0" rotation="-90 0 0" width="1000" height="1000" color="#567d46"></a-plane>
        <a-grid position="0 0.02 0" width="1000" height="1000" color="#4a6b3d" opacity="0.3"></a-grid>

        <a-entity id="rig" position="0 0 0">
            <a-entity id="player-body" visible="false">
                <a-box position="0 1.6 0" width="0.4" height="0.4" depth="0.4" id="p-head" color="#2c3e50"></a-box>
                <a-box position="0 1.0 0" width="0.4" height="0.8" depth="0.2" id="p-body" color="#34495e"></a-box>
                <a-box position="-0.3 1.0 0" width="0.2" height="0.8" depth="0.2" id="p-arm-l" color="#2c3e50"></a-box>
                <a-box position="0.3 1.0 0" width="0.2" height="0.8" depth="0.2" id="p-arm-r" color="#2c3e50"></a-box>
            </a-entity>
            
            <a-entity id="camera" camera position="0 1.6 0" look-controls="enabled: false"></a-entity>
        </a-entity>

        <a-light type="ambient" color="#FFF"></a-light>
    </a-scene>

    <script>
        // --- LÓGICA DO MENU E SKIN ---
        let currentSkin = "padrao";
        
        function startGame() {
            document.getElementById('menu-inicial').style.display = 'none';
            document.getElementById('game-ui').style.display = 'block';
        }

        function exitGame() {
            document.getElementById('menu-inicial').style.display = 'flex';
            document.getElementById('game-ui').style.display = 'none';
        }

        function toggleSkin() {
            const parts = ['#p-head', '#p-body', '#p-arm-l', '#p-arm-r'];
            if(currentSkin === "padrao") {
                currentSkin = "rosa";
                document.getElementById('skin-name').innerText = "Rosa";
                // Aplica a textura da imagem que você enviou
                parts.forEach(id => {
                    document.querySelector(id).setAttribute('src', '#skin-rosa');
                    document.querySelector(id).setAttribute('color', '#FFF'); // Reseta a cor para a textura aparecer
                });
            } else {
                currentSkin = "padrao";
                document.getElementById('skin-name').innerText = "Padrão";
                parts.forEach(id => {
                    document.querySelector(id).removeAttribute('src');
                    document.querySelector(id).setAttribute('color', '#2c3e50');
                });
            }
        }

        // --- LÓGICA DE MOVIMENTO E PERSPECTIVA (Mantidos) ---
        const rig = document.querySelector('#rig');
        const camera = document.querySelector('#camera');
        const playerBody = document.querySelector('#player-body');
        
        let moveSpeed = 0.12, lookSens = 0.15, pitch = 0, yaw = 0, viewMode = 0;
        const keys = { up: false, down: false, left: false, right: false };

        function cyclePerspective() {
            viewMode = (viewMode + 1) % 3;
            if (viewMode === 0) { // 1ª Pessoa
                camera.setAttribute('position', '0 1.6 0');
                camera.setAttribute('rotation', '0 0 0');
                playerBody.setAttribute('visible', 'false');
            } else if (viewMode === 1) { // 2ª Pessoa
                camera.setAttribute('position', '0 1.8 3');
                camera.setAttribute('rotation', '0 180 0');
                playerBody.setAttribute('visible', 'true');
            } else { // 3ª Pessoa
                camera.setAttribute('position', '0 2.5 4');
                camera.setAttribute('rotation', '-15 0 0');
                playerBody.setAttribute('visible', 'true');
            }
        }

        // Sistema de Toque para Olhar
        let isTouching = false, lastX, lastY;
        window.addEventListener('touchstart', e => { 
            if(e.target.tagName !== 'BUTTON' && document.getElementById('menu-inicial').style.display === 'none'){
                isTouching = true; lastX = e.touches[0].screenX; lastY = e.touches[0].screenY;
            }
        });
        window.addEventListener('touchmove', e => {
            if(!isTouching) return;
            yaw -= (e.touches[0].screenX - lastX) * lookSens;
            pitch = Math.max(-80, Math.min(80, pitch - (e.touches[0].screenY - lastY) * lookSens));
            lastX = e.touches[0].screenX; lastY = e.touches[0].screenY;
            camera.setAttribute('rotation', `${pitch} ${yaw} 0`);
            playerBody.setAttribute('rotation', `0 ${yaw} 0`);
        });
        window.addEventListener('touchend', () => isTouching = false);

        function bind(id, k) { 
            document.getElementById(id).addEventListener('touchstart', e => {e.preventDefault(); keys[k] = true;});
            document.getElementById(id).addEventListener('touchend', () => keys[k] = false);
        }
        bind('btnUp','up'); bind('btnDown','down'); bind('btnLeft','left'); bind('btnRight','right');

        function update() {
            if(keys.up || keys.down || keys.left || keys.right) {
                let angle = yaw * (Math.PI / 180);
                let pos = rig.getAttribute('position');
                if(keys.up){ pos.x -= Math.sin(angle)*moveSpeed; pos.z -= Math.cos(angle)*moveSpeed; }
                if(keys.down){ pos.x += Math.sin(angle)*moveSpeed; pos.z += Math.cos(angle)*moveSpeed; }
                if(keys.left){ pos.x -= Math.cos(angle)*moveSpeed; pos.z += Math.sin(angle)*moveSpeed; }
                if(keys.right){ pos.x += Math.cos(angle)*moveSpeed; pos.z -= Math.sin(angle)*moveSpeed; }
                rig.setAttribute('position', pos);
            }
            requestAnimationFrame(update);
        }
        update();
    </script>
</body>
</html>
