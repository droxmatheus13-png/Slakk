<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>FNAF: No Safe Place</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Courier New', monospace;
}

body {
    background: black;
    color: white;
    height: 100vh;
    overflow: hidden;
    transition: filter 0.3s;
}

/* EST√ÅTICA */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: url("https://i.imgur.com/8KQkZgN.gif");
    opacity: 0.06;
    pointer-events: none;
}

/* TELAS */
.screen, .settings, .tutorial {
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    text-align: center;
}

.screen {
    display: flex;
}

/* T√çTULO */
.title {
    font-size: 2.4em;
    letter-spacing: 3px;
    margin-bottom: 10px;
    animation: glitch 2.5s infinite;
}

@keyframes glitch {
    0% { text-shadow: 2px 0 red; }
    25% { text-shadow: -2px 0 cyan; }
    50% { text-shadow: 2px 2px red; }
    75% { text-shadow: -2px -2px cyan; }
    100% { text-shadow: 2px 0 red; }
}

.subtitle {
    opacity: 0.7;
    margin-bottom: 30px;
}

/* BOT√ïES */
button {
    background: none;
    border: 1px solid white;
    color: white;
    padding: 12px 30px;
    margin: 8px;
    font-size: 1em;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    background: white;
    color: black;
}

/* CONFIG */
.settings, .tutorial {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
}

.setting {
    margin: 10px;
}

/* FOOTER */
.footer {
    position: absolute;
    bottom: 15px;
    font-size: 0.7em;
    opacity: 0.5;
}
</style>
</head>

<body>

<!-- MENU -->
<div class="screen" id="menu">
    <div class="title">FNAF: NO SAFE PLACE</div>
    <div class="subtitle">There is no safe place.</div>

    <button onclick="openTutorial()">JOGAR</button>
    <button onclick="openSettings()">CONFIGURA√á√ïES</button>
    <button onclick="credits()">CR√âDITOS</button>

    <div class="footer">Fangame n√£o oficial</div>
</div>

<!-- CONFIGURA√á√ïES -->
<div class="settings" id="settings">
    <h3>CONFIGURA√á√ïES</h3>

    <div class="setting">
        üîä Volume:
        <input type="range" id="volume" min="0" max="100">
    </div>

    <div class="setting">
        üåë Brilho:
        <input type="range" id="brightness" min="50" max="150">
    </div>

    <div class="setting">
        üéÆ Plataforma:
        <select id="platform">
            <option value="mobile">Celular</option>
            <option value="pc">Computador</option>
        </select>
    </div>

    <button onclick="closeSettings()">VOLTAR</button>
</div>

<!-- MINI TUTORIAL -->
<div class="tutorial" id="tutorial">
    <h3>ANTES DE COME√áAR</h3>
    <p style="max-width: 320px; opacity:0.8; margin:15px;">
        ‚Ä¢ Use o tablet para ver c√¢meras<br>
        ‚Ä¢ Gerencie energia com cuidado<br>
        ‚Ä¢ Alguns animatr√¥nicos reagem ao SOM<br>
        ‚Ä¢ N√£o existe lugar seguro
    </p>

    <button onclick="startGame(false)">ENTRAR SEM MICROFONE üö´</button>
    <button onclick="startGame(true)">ENTRAR COM MICROFONE üé§</button>

    <button onclick="backToMenu()">VOLTAR</button>
</div>

<!-- SOM -->
<audio id="ambience" loop>
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_9b88c9f6b1.mp3">
</audio>

<script>
const ambience = document.getElementById("ambience");
const volumeSlider = document.getElementById("volume");
const brightnessSlider = document.getElementById("brightness");
const platformSelect = document.getElementById("platform");

let micEnabled = false;

/* CARREGAR CONFIG */
function loadSettings() {
    const volume = localStorage.getItem("volume") ?? 50;
    const brightness = localStorage.getItem("brightness") ?? 100;
    const platform = localStorage.getItem("platform") ?? "mobile";

    volumeSlider.value = volume;
    brightnessSlider.value = brightness;
    platformSelect.value = platform;

    ambience.volume = volume / 100;
    document.body.style.filter = `brightness(${brightness}%)`;
}
loadSettings();

/* SALVAR */
volumeSlider.oninput = () => {
    localStorage.setItem("volume", volumeSlider.value);
    ambience.volume = volumeSlider.value / 100;
};

brightnessSlider.oninput = () => {
    localStorage.setItem("brightness", brightnessSlider.value);
    document.body.style.filter = `brightness(${brightnessSlider.value}%)`;
};

platformSelect.onchange = () => {
    localStorage.setItem("platform", platformSelect.value);
};

/* MICROFONE */
async function enableMicrophone() {
    try {
        await navigator.mediaDevices.getUserMedia({ audio: true });
        micEnabled = true;
        localStorage.setItem("microphone", "true");
    } catch {
        alert("Microfone negado.");
        micEnabled = false;
    }
}

/* MENU */
ambience.play().catch(()=>{});

function openSettings() {
    menu.style.display = "none";
    settings.style.display = "flex";
}

function closeSettings() {
    settings.style.display = "none";
    menu.style.display = "flex";
}

function openTutorial() {
    menu.style.display = "none";
    tutorial.style.display = "flex";
}

function backToMenu() {
    tutorial.style.display = "none";
    menu.style.display = "flex";
}

async function startGame(useMic) {
    if (useMic) await enableMicrophone();
    localStorage.setItem("microphone", useMic);
    alert("Noite 1 iniciando...\nMicrofone: " + (useMic ? "ATIVO" : "DESATIVADO"));
    // window.location.href = "game.html";
}

function credits() {
    alert("Criado por Slazeer\nFNAF: No Safe Place");
}
</script>

</body>
    </html>
